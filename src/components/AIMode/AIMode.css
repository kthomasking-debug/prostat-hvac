.ai-mode-overlay{
  position:fixed;
  top:4rem;
  left:0;
  right:0;
  bottom:0;
  z-index:50;
  pointer-events:auto;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  display:flex;
  flex-direction:column;
  background:linear-gradient(to bottom right,#0f172a,#1e3a8a,#0f172a);
}
.ai-mode-bg{
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 50% 30%,#6fb7ff,#1b3250);
  opacity:.3;
}
.ai-mode-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#fff}
.ai-mode-temp{font-size:4rem;font-weight:200;line-height:1}
.ai-mode-target{margin-top:.5rem;font-size:1rem;opacity:.8}
.ai-mode-status{
  position:absolute;
  bottom:1rem;
  left:1rem;
  font-size:.75rem;
  color:#d3e9ff;
  background:rgba(0,0,0,.35);
  padding:.5rem .75rem;
  border-radius:.5rem;
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  gap:.5rem;
  transition:all .3s ease;
  z-index:60;
}
.ai-mode-status-icon{
  font-size:1.1em;
  animation:pulse 2s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{opacity:1;transform:scale(1)}
  50%{opacity:.7;transform:scale(1.1)}
}
/* Enhanced visibility for large screens */
@media (min-width:1024px){
  .ai-mode-status{
    font-size:1rem;
    padding:.75rem 1.25rem;
    bottom:2rem;
    left:2rem;
    background:rgba(0,0,0,.5);
    border:1px solid rgba(255,255,255,.2);
    box-shadow:0 4px 12px rgba(0,0,0,.3);
  }
  .ai-mode-status-icon{
    font-size:1.3em;
  }
}
@media (min-width:1536px){
  .ai-mode-status{
    font-size:1.125rem;
    padding:1rem 1.5rem;
    font-weight:500;
    bottom:2.5rem;
    left:2.5rem;
  }
  .ai-mode-status-icon{
    font-size:1.5em;
  }
}
/* Interactive panel */
.ai-mode-panel{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:min(740px,92vw);
  background:#fff;
  color:#1a1a1a;
  border:1px solid #e5e7eb;
  border-radius:1.25rem;
  box-shadow:0 20px 50px rgba(0,0,0,.15);
  overflow:hidden;
  max-height:85vh;
  display:flex;
  flex-direction:column
}
/* Much wider on large screens for voice mode */
@media (min-width:1024px){
  .ai-mode-panel{
    width:min(1200px,90vw);
  }
}
@media (min-width:1536px){
  .ai-mode-panel{
    width:min(1400px,85vw);
  }
}
@media (min-width:1920px){
  .ai-mode-panel{
    width:min(1600px,80vw);
  }
}
.ai-mode-panel-header{display:flex;align-items:center;gap:1rem;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #e5e7eb}
.ai-mode-panel-icon{width:3rem;height:3rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:.75rem;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}
.ai-mode-panel-title{flex:1}
.ai-mode-panel-title h2{font-size:1.5rem;margin:0;font-weight:700;color:#111}
.ai-mode-panel-subtitle{font-size:.875rem;margin:.25rem 0 0;color:#6b7280;font-weight:400}
.ai-mode-panel-content{padding:1.5rem;flex:1;overflow-y:auto}
.ai-mode-exit-btn{position:absolute;top:1.25rem;right:1.25rem;background:transparent;border:none;color:#6b7280;font-size:2rem;width:2.5rem;height:2.5rem;border-radius:.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;line-height:1;transition:all .2s}
.ai-mode-exit-btn:hover{background:#f3f4f6;color:#111}
@media (max-width:640px){.ai-mode-temp{font-size:3rem}}
.ai-mode-loading,.ai-mode-error{margin-top:.75rem;font-size:.75rem;opacity:.85}
.ai-mode-recommendation{margin-top:1rem;font-size:.85rem;max-width:260px;line-height:1.25;background:rgba(0,0,0,.35);padding:.6rem .75rem;border-radius:.6rem}
.ai-mode-recommendation .ai-mode-reason{display:block;margin-top:.35rem;font-size:.7rem;opacity:.8}
.ai-weather-layer{position:absolute;inset:0;pointer-events:none}
.ai-star{position:absolute;width:3px;height:3px;background:#fff;border-radius:50%;box-shadow:0 0 6px 2px rgba(255,255,255,.6)}
.ai-snow{position:absolute;width:6px;height:6px;background:#fff;border-radius:50%;filter:drop-shadow(0 0 4px rgba(255,255,255,.5))}
.ai-rain{position:absolute;background:linear-gradient(to bottom,#a5d4ff,#ffffff);border-radius:1px}

/* New Chat-Style Voice Mode Interface */
.ai-mode-panel-new{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:min(1200px,90vw);
  max-width:1400px;
  max-height:90vh;
  background:rgba(30,41,59,.95);
  backdrop-filter:blur(24px);
  -webkit-backdrop-filter:blur(24px);
  color:#fff;
  border-radius:1.5rem;
  box-shadow:0 25px 60px rgba(0,0,0,.4);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  border:1px solid rgba(148,163,184,.3);
}
@media (min-width:1536px){
  .ai-mode-panel-new{
    width:min(1400px,85vw);
  }
}
@media (min-width:1920px){
  .ai-mode-panel-new{
    width:min(1600px,80vw);
  }
}

/* Header */
.ai-mode-header-new{
  padding:1.5rem 2rem;
  border-bottom:1px solid rgba(148,163,184,.3);
  position:relative;
  overflow:hidden;
  background:linear-gradient(to right,#2563eb,#9333ea);
}
.ai-mode-header-overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.1);
  pointer-events:none;
}
.ai-mode-header-new .relative{
  position:relative;
  z-index:1;
}
.ai-mode-header-icon{
  width:3.5rem;
  height:3.5rem;
  background:rgba(255,255,255,.2);
  backdrop-filter:blur(8px);
  -webkit-backdrop-filter:blur(8px);
  border-radius:1rem;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}
.ai-mode-header-title{
  font-size:2.5rem;
  font-weight:700;
  margin:0;
  color:#fff;
}
.ai-mode-header-subtitle{
  font-size:1.125rem;
  color:rgba(255,255,255,.7);
  margin:0;
  margin-top:.25rem;
}

/* Navigation Tabs */
.ai-mode-tabs{
  display:flex;
  gap:0;
  border-bottom:1px solid rgba(148,163,184,.3);
  background:rgba(30,41,59,.5);
  padding:0 2rem;
}
.ai-mode-tab{
  flex:1;
  padding:.75rem 1.5rem;
  background:transparent;
  border:none;
  color:rgba(148,163,184,.8);
  font-size:1rem;
  font-weight:500;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:.5rem;
  border-bottom:2px solid transparent;
  transition:all .2s;
  position:relative;
}
.ai-mode-tab:hover{
  color:rgba(203,213,225,.9);
}
.ai-mode-tab-active{
  color:#60a5fa;
  border-bottom-color:#60a5fa;
  background:rgba(51,65,85,.3);
}

/* Content Area */
.ai-mode-content-new{
  flex:1;
  overflow-y:auto;
  padding:1.5rem;
  background:rgba(15,23,42,.3);
  font-size:1rem;
}
.ai-mode-section-title{
  font-size:.875rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.05em;
  color:rgba(148,163,184,.8);
  margin:0;
}
.ai-mode-quick-question-btn{
  display:flex;
  align-items:center;
  gap:.75rem;
  padding:1rem;
  background:rgba(51,65,85,.5);
  border:none;
  border-radius:.75rem;
  color:#fff;
  font-size:1rem;
  font-weight:500;
  cursor:pointer;
  transition:all .2s;
  text-align:left;
  overflow:hidden;
  position:relative;
}
.ai-mode-quick-question-btn:hover{
  background:rgba(51,65,85,.7);
  transform:scale(1.02);
}
.ai-mode-example-container{
  background:rgba(51,65,85,.3);
  border-radius:.75rem;
  padding:1rem;
  space-y:.5rem;
}
.ai-mode-example-question{
  display:flex;
  align-items:start;
  gap:.5rem;
  padding:.5rem 0;
  background:transparent;
  border:none;
  color:rgba(203,213,225,.8);
  font-size:.875rem;
  cursor:pointer;
  transition:color .2s;
  text-align:left;
  width:100%;
}
.ai-mode-example-question:hover{
  color:#fff;
}
.ai-mode-chat-area{
  min-height:200px;
  margin-top:2rem;
  font-size:1.125rem;
}
.ai-mode-output-box{
  background:rgba(30,41,59,.6);
  border:1px solid rgba(148,163,184,.3);
  border-radius:.75rem;
  padding:1.5rem;
  min-height:180px;
  max-height:450px;
  overflow-y:auto;
  font-size:1rem;
  line-height:1.7;
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
}
.ai-mode-output-box::-webkit-scrollbar{
  width:8px;
}
.ai-mode-output-box::-webkit-scrollbar-track{
  background:rgba(51,65,85,.3);
  border-radius:4px;
}
.ai-mode-output-box::-webkit-scrollbar-thumb{
  background:rgba(148,163,184,.5);
  border-radius:4px;
}
.ai-mode-output-box::-webkit-scrollbar-thumb:hover{
  background:rgba(148,163,184,.7);
}
.ai-mode-history-content,.ai-mode-settings-content{
  padding:2rem 0;
  min-height:200px;
  font-size:1.125rem;
}

/* Status Cards */
.ai-mode-status-card{
  border-radius:.75rem;
  padding:1rem;
  border:1px solid;
}
.ai-mode-status-online{
  background:linear-gradient(135deg,rgba(34,197,94,.2),rgba(16,185,129,.2));
  border-color:rgba(34,197,94,.3);
}
.ai-mode-status-model{
  background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(6,182,212,.2));
  border-color:rgba(59,130,246,.3);
}
.ai-mode-status-voice{
  background:linear-gradient(135deg,rgba(168,85,247,.2),rgba(236,72,153,.2));
  border-color:rgba(168,85,247,.3);
}

/* Input Container */
.ai-mode-input-container{
  background:rgba(30,41,59,.8);
  backdrop-filter:blur(8px);
  -webkit-backdrop-filter:blur(8px);
  border-top:1px solid rgba(148,163,184,.3);
  padding:1rem;
}
.ai-mode-input-bar{
  display:flex;
  align-items:end;
  gap:.75rem;
  margin-bottom:.75rem;
}
.ai-mode-input-field{
  flex:1;
  padding:.875rem 1rem;
  background:rgba(51,65,85,.5);
  border:1px solid rgba(100,116,139,.5);
  border-radius:.75rem;
  color:#fff;
  font-size:1rem;
  outline:none;
  transition:all .2s;
  padding-right:2.5rem;
}
.ai-mode-input-field::placeholder{
  color:rgba(148,163,184,.6);
  font-size:1rem;
}
.ai-mode-input-field:focus{
  background:rgba(51,65,85,.7);
  border-color:#60a5fa;
  box-shadow:0 0 0 3px rgba(96,165,250,.1);
}
.ai-mode-mic-btn{
  width:2.75rem;
  height:2.75rem;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(51,65,85,.5);
  border:1px solid rgba(100,116,139,.5);
  border-radius:.75rem;
  color:rgba(203,213,225,.7);
  cursor:pointer;
  transition:all .2s;
}
.ai-mode-mic-btn:hover{
  background:rgba(51,65,85,.7);
  color:#fff;
}
.ai-mode-send-btn{
  width:2.75rem;
  height:2.75rem;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(to right,#2563eb,#9333ea);
  border:none;
  border-radius:.75rem;
  color:#fff;
  cursor:pointer;
  transition:all .2s;
}
.ai-mode-send-btn:hover:not(:disabled){
  transform:scale(1.05);
  box-shadow:0 4px 12px rgba(37,99,235,.4);
}
.ai-mode-send-btn:disabled{
  opacity:.5;
  cursor:not-allowed;
}

/* Status Bar */
.ai-mode-status-bar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:.75rem;
  color:rgba(148,163,184,.8);
}

/* Exit Button */
.ai-mode-exit-btn-new{
  position:absolute;
  top:1.25rem;
  right:1.25rem;
  width:2.5rem;
  height:2.5rem;
  background:rgba(0,0,0,.3);
  border:1px solid rgba(255,255,255,.1);
  border-radius:.5rem;
  color:rgba(255,255,255,.7);
  font-size:1.5rem;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all .2s;
  z-index:10;
}
.ai-mode-exit-btn-new:hover{
  background:rgba(0,0,0,.5);
  color:#fff;
  border-color:rgba(255,255,255,.2);
}

/* Hide AskJoule's input and extra UI when in voice mode */
.ai-mode-chat-area [class*="border-2"][class*="border-blue-300"]{
  border:none!important;
  background:transparent!important;
  padding:0!important;
  box-shadow:none!important;
}
.ai-mode-chat-area form,
.ai-mode-chat-area [class*="space-y-4"]:has(form),
.ai-mode-chat-area [class*="bg-gradient-to-br"][class*="from-blue-50"],
.ai-mode-chat-area [class*="mt-6"][class*="space-y-4"]{
  display:none!important;
}
.ai-mode-chat-area [class*="rounded-xl"][class*="border"][class*="bg-white"]{
  background:transparent!important;
  border:none!important;
  padding:1rem!important;
  min-height:auto!important;
}
.ai-mode-chat-area h2,
.ai-mode-chat-area [class*="flex"][class*="items-start"][class*="justify-between"],
.ai-mode-chat-area [class*="mb-6"]:has(button[onClick*="setShowAbout"]){
  display:none!important;
}
